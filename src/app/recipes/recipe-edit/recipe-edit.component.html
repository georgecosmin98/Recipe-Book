<div class="container-fluid" id="recipe-detail-container"
  style="min-height: 92vh; background-color: #E5E5E5; padding-bottom: 15px;">
  <div class="row">
    <div class="col-12" style="padding-right: 0; padding-left: 0;">
      <img [src]="imagePath.value.length>0 ? imagePath.value : defaultImage" alt=" img"
        style="max-height: 250px; width:100%; object-fit:cover;">
    </div>
  </div>
  <form [formGroup]="recipeForm" (ngSubmit)="onSubmit()">
    <div style="margin-top: 30px;" align="center">
      <mat-card style="max-width: 700px;">
        <div align="center" style="width: 100%; margin-top: 30px;">
          <mat-form-field appearance="outline" style="width: 100%; max-width: 500px;">
            <mat-label>Recipe Name</mat-label>
            <input matInput placeholder="Recipe Name" id="name" formControlName="name">
            <mat-error *ngIf="recipeForm.controls?.name?.errors?.required === true">Recipe Name is required!
            </mat-error>
          </mat-form-field>
        </div>
        <div align="center" style="width: 100%;">
          <mat-form-field appearance="outline" style="width: 100%; max-width: 500px;">
            <mat-label>Image URL</mat-label>
            <input matInput placeholder="Image URL" id="imagePath" formControlName="imagePath" #imagePath>
            <mat-error *ngIf="recipeForm.controls?.imagePath?.errors?.required === true">Image Path is required!
            </mat-error>
          </mat-form-field>
        </div>
        <div align="center" style="width: 100%;">
          <mat-form-field appearance="outline" style="width: 100%; max-width: 500px;">
            <mat-label>Description</mat-label>
            <input matInput placeholder="Description" id="description" formControlName="description">
            <mat-error *ngIf="recipeForm.controls?.description?.errors?.required === true">Description is required!
            </mat-error>
          </mat-form-field>
        </div>
        <div align="center" style="width: 100%;">
          <div class="col-12" formArrayName="ingredients">
            <div class="row flex-nowrap" [formGroupName]="i" *ngFor="let ingredientCtrl of controls; let i = index"
              style="margin-top: 10px; flex-direction: column;">
              <div *ngIf="i===0">
                <mat-form-field appearance="outline"
                  style="width: 50%; max-width: 300px; margin-right: 50px; margin-left: 63px">
                  <mat-label>Ingredient Name</mat-label>
                  <input matInput placeholder="Ingredient Name" id="name" formControlName="name">
                  <mat-error *ngIf="recipeForm.controls.ingredients.controls[i].controls?.name?.errors?.required">
                    Ingredient Name is required!
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" style="width: 40%; max-width: 150px; margin-right: 25px;">
                  <mat-label>Quantity</mat-label>
                  <input type="number" matInput placeholder="Amount" id="amount" formControlName="amount">
                  <mat-error *ngIf="recipeForm.controls.ingredients.controls[i].controls?.amount?.errors?.required">
                    Amount is required!
                  </mat-error>
                </mat-form-field>
                <button type="button" class="btn btn-success" (click)="onAddIngredient()" style="
              font-size: 32px;
              padding:5px;
              line-height: 18px;
              border-radius: 10px;
              width:38px;
              height: 32px;
              vertical-align: sub;
              ">+</button>
              </div>
              <div *ngIf="i !== controls.length && i>0">
                <mat-form-field appearance="outline"
                  style="width: 50%; max-width: 300px; margin-right: 50px; margin-left: 63px">
                  <mat-label>Ingredient Name</mat-label>
                  <input matInput placeholder="Ingredient Name" id="name" formControlName="name">
                  <mat-error *ngIf="recipeForm.controls.ingredients.controls[i].controls?.name?.errors?.required">
                    Ingredient Name is required!
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" style="width: 40%; max-width: 150px; margin-right: 25px;">
                  <mat-label>Quantity</mat-label>
                  <input type="number" matInput placeholder="Amount" id="amount" formControlName="amount">
                  <mat-error *ngIf="recipeForm.controls.ingredients.controls[i].controls?.amount?.errors?.required">
                    Amount is required!
                  </mat-error>
                </mat-form-field>
                <button type="button" class="btn btn-danger" (click)="onDeleteIngredient(i)" style="
                font-size: 28px;
                padding:5px;
                line-height: 18px;
                border-radius: 10px;
                width:38px;
                height: 32px;
                vertical-align: sub;">X</button>
              </div>
            </div>
          </div>
        </div>

        <div align="center" style="width: 100%;">
          <button type="button" class="btn btn-danger" style="margin-right:50px; border-radius: 10px;"
            (click)="onCancel()">Cancel</button>
          <button type="submit" class="btn btn-success" style="border-radius: 10px;"
            [disabled]="!recipeForm.valid">Save</button>
        </div>
      </mat-card>
    </div>
  </form>
</div>
